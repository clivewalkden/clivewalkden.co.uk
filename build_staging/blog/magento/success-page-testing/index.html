<!DOCTYPE html>
<html lang="en">
    <head>
                <link rel="preconnect" href="https://scripts.sirv.com" crossorigin>
<link rel="preconnect" href="https://clivewalkden.sirv.com" crossorigin>
<link rel="dns-prefetch" href="https://scripts.sirv.com">
<link rel="dns-prefetch" href="https://clivewalkden.sirv.com">
<script src="https://scripts.sirv.com/sirv.nospin.js"></script>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
                <link rel="canonical" href="https://clivewalkden.co.uk/blog/magento/success-page-testing/">
                <meta name="description" content="If you want to check your styling on the success page without having to enter a transaction.">
        <link rel="icon" href="/favicon.ico">
        <link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
        <title>Testing your Magento success page</title>
        <link rel="stylesheet" href="/assets/build/css/main.css">
        <script defer src="/assets/build/js/main.js"></script>
        <link href="//fonts.googleapis.com/css?family=Cabin" rel="stylesheet" type="text/css">
    </head>
    <body class="text-gray-900 font-default antialiased leading-normal tracking-normal">
        
    <header class="bg-gray-800 p-8 mt-0 fixed w-full z-10 top-0">
    <div class="container mx-auto flex flex-wrap items-center">
        <div class="flex w-1/2 justify-center md:justify-start text-white">
            <a href="/" class="text-white no-underline hover:text-white hover:no-underline">
                <h1 class="text-3xl pl-2" style="text-shadow: 1px 1px 0 #ffae00">Clive Walkden</h1>
                <span class="font-serif italic items-center text-gray-200 pl-2 text-xs lg:text-base hidden md:block">SysOps, Magento 2, PHP and my general mind dumps.</span>
            </a>
        </div>

        <div class="w-full lg:hidden flex justify-end flex-1 md:float-right">
            <button id="nav-toggle"
                    class="flex items-center px-3 py-2 border rounded text-gray-500 border-gray-600 hover:text-white hover:border-white">
                <svg class="fill-current h-3 w-3" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><title>
                        Menu</title>
                    <path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"/>
                </svg>
            </button>
        </div>

        <nav class="w-full flex-grow lg:flex lg:items-center lg:w-auto hidden lg:block pt-6 lg:pt-0 justify-end" id="nav-content">
    <ul class="list-reset flex justify-between flex-1 md:flex-none items-center">
        <li class="mr-3">
            <a href="/" class="inline-block text-gray-400 no-underline hover:text-gray-200 hover:text-underline py-2 px-4">Home</a>
        </li>
        <li class="mr-3">
            <a href="/portfolio/" class="inline-block text-gray-400 no-underline hover:text-gray-200 hover:text-underline py-2 px-4">Portfolio</a>
        </li>
        <li class="fmr-3">
            <a href="/blog/" class="inline-block py-2 px-4 text-white no-underline">Blog</a>
        </li>
        <li class="mr-3">
            <a href="/about/" class="inline-block text-gray-400 no-underline hover:text-gray-200 hover:text-underline py-2 px-4">About</a>
        </li>
    </ul>
</nav>    </div>
</header>
    <div role="main" class="container shadow-lg mx-auto bg-white mt-24 md:mt-28">
                <div class="px-4 py-16 mx-auto sm:max-w-xl md:max-w-full lg:max-w-screen-xl md:px-24 lg:px-8 lg:py-20">
        <!--Title-->
        <div class="text-center">
            <p class="text-sm md:text-base text-yellow-500 font-bold">
                                <time datetime="2014-09-17T00:00:00+00:00">17 September 2014</time>
                <span class="text-gray-900">/</span> <a href="/blog/magento/">Magento</a>
            </p>
            <div class="flex">
                                    <a href="/blog/magento/magento-format-date-helper/" title="Magento Format Date Core Helper Method"
                       class="flex-none text-sm self-center">Previous Article</a>
                                <h1 class="font-sans text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl sm:leading-none flex-grow text-center">Testing your Magento success page</h1>
                                    <a href="/blog/magento/check-if-static-block-is-enabled-in-magento/" title="Check if a static block is enabled in Magento"
                       class="flex-none text-sm self-center">Next Article</a>
                            </div>
        </div>

        <!--image-->
                    <div class="container w-full max-w-6xl mx-auto bg-white bg-cover mt-12 rounded bg-center"
                 style="background-image:url('/assets/images/blog/categories/magento.jpg'); height: 75vh;"></div>
        
    <!--Container-->
        <div class="container max-w-5xl mx-auto -mt-32">

            <div class="mx-0 sm:mx-6">

                <div class="bg-white w-full p-8 md:p-24 text-lg text-gray-700 content">
                    <!--Post Content-->
                    <p>There are several plugins that add functionality to the order success page in Magento, testing to make sure the styling matches your site layout can become tedious if you have to enter multiple orders.</p>

<p>I've found a way to circumvent the need to enter orders to view the page, it does require edits to the Magento core files and should be changed back as soon as you&#39;ve completed your testing. <strong>Failure to do so will prevent the system functioning correctly for all future orders!</strong></p>

<p>For this to work you need to have 1 successful order in the system as we need to reference this in the update.</p>

<p>Open <code>/app/code/core/Mage/Checkout/controllers/OnepageController.php</code> you need to look for the successAction() method around line 275 as this is method that controls the success page logic. It should look very similar to the code below.</p>

<pre><code class="language-php">public function successAction()
{
  $session = $this-&gt;getOnepage()-&gt;getCheckout();
  if (!$session-&gt;getLastSuccessQuoteId()) {
    $this-&gt;_redirect('checkout/cart');
    return;
  }

  $lastQuoteId = $session-&gt;getLastQuoteId();
  $lastOrderId = $session-&gt;getLastOrderId();
  $lastRecurringProfiles = $session-&gt;getLastRecurringProfileIds();

  if (!$lastQuoteId || (!$lastOrderId &amp;&amp; empty($lastRecurringProfiles))) {
    $this-&gt;_redirect('checkout/cart');
    return;
  }

  $session-&gt;clear();
  $this-&gt;loadLayout();
  $this-&gt;_initLayoutMessages('checkout/session');

  Mage::dispatchEvent('checkout_onepage_controller_success_action', array('order_ids' =&gt; array($lastOrderId)));

  $this-&gt;renderLayout();
}
</code></pre>

<p>First you need to comment out the code that handles redirecting if the required sessions aren&#39;t set. If this isn&#39;t done then you will get redirected back to the cart page.</p>

<pre><code class="language-php">/*
$session = $this-&gt;getOnepage()-&gt;getCheckout();
if (!$session-&gt;getLastSuccessQuoteId()) {
  $this-&gt;_redirect('checkout/cart');
  return;
}

$lastQuoteId = $session-&gt;getLastQuoteId();
$lastOrderId = $session-&gt;getLastOrderId();
$lastRecurringProfiles = $session-&gt;getLastRecurringProfileIds();

if (!$lastQuoteId || (!$lastOrderId &amp;&amp; empty($lastRecurringProfiles))) {
  $this-&gt;_redirect('checkout/cart');
  return;
}

$session-&gt;clear();
*/
</code></pre>

<p>Then we need to add some extra code immediately after the closing comment that sets the successful quote ID and Order ID, this will then display the information on the success page. To get this information simply navigate to your database and access the sales_flat_order table you will need to enter the entity_id field into the $orderId variable and the quote_id field into the $quoteId variable.</p>

<pre><code class="language-php">$session = $this-&gt;getOnepage()-&gt;getCheckout();

$orderId = 1;
$quoteId = 2;

$session-&gt;setLastSuccessQuoteId($quoteId);
$session-&gt;setLastQuoteId($quoteId);
$session-&gt;setLastOrderId($orderId);
</code></pre>

<p>Now you have made this update your code should look like the below.</p>

<pre><code class="language-php">public function successAction()
{
  /*
  $session = $this-&gt;getOnepage()-&gt;getCheckout();
  if (!$session-&gt;getLastSuccessQuoteId()) {
    $this-&gt;_redirect('checkout/cart');
    return;
  }

  $lastQuoteId = $session-&gt;getLastQuoteId();
  $lastOrderId = $session-&gt;getLastOrderId();
  $lastRecurringProfiles = $session-&gt;getLastRecurringProfileIds();

  if (!$lastQuoteId || (!$lastOrderId &amp;&amp; empty($lastRecurringProfiles))) {
    $this-&gt;_redirect('checkout/cart');
    return;
  }

  $session-&gt;clear();
  */

  /* TESTING */
  $session = $this-&gt;getOnepage()-&gt;getCheckout();

  $orderId = 1;
  $quoteId = 2;

  $session-&gt;setLastSuccessQuoteId($quoteId);
  $session-&gt;setLastQuoteId($quoteId);
  $session-&gt;setLastOrderId($orderId);
  /* EO: TESTING */

  $this-&gt;loadLayout();
  $this-&gt;_initLayoutMessages('checkout/session');

  Mage::dispatchEvent('checkout_onepage_controller_success_action', array('order_ids' =&gt; array($lastOrderId)));

  $this-&gt;renderLayout();
}
</code></pre>

<p>Once you upload this page you can simply navigate to your Magento checkout success page, the url should be http://www.yourdomain.co.uk/checkout/onepage/success/. You should see the results of the order you entered. Now you can refresh as much as you want to get your styling perfect.</p>

<p><strong>Don't forget to remove the changes before your site goes live to avoid any site issues.</strong></p>
                    <!--/ Post Content-->
                </div>

                <!--Author-->
                <div class="flex w-full items-center font-sans p-8 md:p-24">
                    <img class="w-10 h-10 rounded-full mr-4" src="/assets/images/clive-walkden.jpg"
                         alt="Avatar of Clive Walkden">
                    <div class="flex-1">
                        <p class="text-base font-bold text-base md:text-xl leading-none">Clive Walkden</p>
                    </div>
                </div>
                <!--/Author-->
            </div>
        </div>
        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "BlogPosting",
            "headline": "Testing your Magento success page",
            "description": "This method allows you to check the styling of your Magento success page.",
            "datePublished": "September 17, 2014",
            "mainEntityOfPage": "True",
            "image": {
                "@type": "imageObject",
                "url": "https://www.clivewalkden.co.uk/assets/images/blog/articles/magento.jpg",
                "height": "600",
                "width": "800"
            },
            "publisher": {
                "@type": "Organization",
                "name": "Clive Walkden",
                "logo": {
                    "@type": "imageObject",
                    "url": "https://www.clivewalkden.co.uk/assets/images/blog/categories/general.jpg"
                }
            },
            "author": {
                "@type": "Person",
                "name": "Clive Walkden",
                "url": "https://clivewalkden.co.uk/about/"
            },
            "articleBody": "There are several plugins that add functionality to the order success page in Magento, testing to make sure the styling matches your site layout can become tedious if you have to enter multiple orders.

I&#039;ve found a way to circumvent the need to enter orders to view the page, it does require edits to the Magento core files and should be changed back as soon as you&amp;#39;ve completed your testing. Failure to do so will prevent the system functioning correctly for all future orders!

For this to work you need to have 1 successful order in the system as we need to reference this in the update.

Open /app/code/core/Mage/Checkout/controllers/OnepageController.php you need to look for the successAction() method around line 275 as this is method that controls the success page logic. It should look very similar to the code below.

public function successAction()
{
  $session = $this-&amp;gt;getOnepage()-&amp;gt;getCheckout();
  if (!$session-&amp;gt;getLastSuccessQuoteId()) {
    $this-&amp;gt;_redirect(&#039;checkout/cart&#039;);
    return;
  }

  $lastQuoteId = $session-&amp;gt;getLastQuoteId();
  $lastOrderId = $session-&amp;gt;getLastOrderId();
  $lastRecurringProfiles = $session-&amp;gt;getLastRecurringProfileIds();

  if (!$lastQuoteId || (!$lastOrderId &amp;amp;&amp;amp; empty($lastRecurringProfiles))) {
    $this-&amp;gt;_redirect(&#039;checkout/cart&#039;);
    return;
  }

  $session-&amp;gt;clear();
  $this-&amp;gt;loadLayout();
  $this-&amp;gt;_initLayoutMessages(&#039;checkout/session&#039;);

  Mage::dispatchEvent(&#039;checkout_onepage_controller_success_action&#039;, array(&#039;order_ids&#039; =&amp;gt; array($lastOrderId)));

  $this-&amp;gt;renderLayout();
}


First you need to comment out the code that handles redirecting if the required sessions aren&amp;#39;t set. If this isn&amp;#39;t done then you will get redirected back to the cart page.

/*
$session = $this-&amp;gt;getOnepage()-&amp;gt;getCheckout();
if (!$session-&amp;gt;getLastSuccessQuoteId()) {
  $this-&amp;gt;_redirect(&#039;checkout/cart&#039;);
  return;
}

$lastQuoteId = $session-&amp;gt;getLastQuoteId();
$lastOrderId = $session-&amp;gt;getLastOrderId();
$lastRecurringProfiles = $session-&amp;gt;getLastRecurringProfileIds();

if (!$lastQuoteId || (!$lastOrderId &amp;amp;&amp;amp; empty($lastRecurringProfiles))) {
  $this-&amp;gt;_redirect(&#039;checkout/cart&#039;);
  return;
}

$session-&amp;gt;clear();
*/


Then we need to add some extra code immediately after the closing comment that sets the successful quote ID and Order ID, this will then display the information on the success page. To get this information simply navigate to your database and access the sales_flat_order table you will need to enter the entity_id field into the $orderId variable and the quote_id field into the $quoteId variable.

$session = $this-&amp;gt;getOnepage()-&amp;gt;getCheckout();

$orderId = 1;
$quoteId = 2;

$session-&amp;gt;setLastSuccessQuoteId($quoteId);
$session-&amp;gt;setLastQuoteId($quoteId);
$session-&amp;gt;setLastOrderId($orderId);


Now you have made this update your code should look like the below.

public function successAction()
{
  /*
  $session = $this-&amp;gt;getOnepage()-&amp;gt;getCheckout();
  if (!$session-&amp;gt;getLastSuccessQuoteId()) {
    $this-&amp;gt;_redirect(&#039;checkout/cart&#039;);
    return;
  }

  $lastQuoteId = $session-&amp;gt;getLastQuoteId();
  $lastOrderId = $session-&amp;gt;getLastOrderId();
  $lastRecurringProfiles = $session-&amp;gt;getLastRecurringProfileIds();

  if (!$lastQuoteId || (!$lastOrderId &amp;amp;&amp;amp; empty($lastRecurringProfiles))) {
    $this-&amp;gt;_redirect(&#039;checkout/cart&#039;);
    return;
  }

  $session-&amp;gt;clear();
  */

  /* TESTING */
  $session = $this-&amp;gt;getOnepage()-&amp;gt;getCheckout();

  $orderId = 1;
  $quoteId = 2;

  $session-&amp;gt;setLastSuccessQuoteId($quoteId);
  $session-&amp;gt;setLastQuoteId($quoteId);
  $session-&amp;gt;setLastOrderId($orderId);
  /* EO: TESTING */

  $this-&amp;gt;loadLayout();
  $this-&amp;gt;_initLayoutMessages(&#039;checkout/session&#039;);

  Mage::dispatchEvent(&#039;checkout_onepage_controller_success_action&#039;, array(&#039;order_ids&#039; =&amp;gt; array($lastOrderId)));

  $this-&amp;gt;renderLayout();
}


Once you upload this page you can simply navigate to your Magento checkout success page, the url should be http://www.yourdomain.co.uk/checkout/onepage/success/. You should see the results of the order you entered. Now you can refresh as much as you want to get your styling perfect.

Don&#039;t forget to remove the changes before your site goes live to avoid any site issues.
"
        }
        </script>

        
        <div class="px-4 py-16 mx-auto sm:max-w-xl md:max-w-full lg:max-w-screen-xl md:px-24 lg:px-8 lg:py-20">

    <div class="max-w-xl mb-2 md:mx-auto sm:text-center lg:max-w-2xl md:mb-12 border-b border-primary">
    <h2 class="mb-4 font-sans text-3xl font-bold tracking-tight text-title sm:text-4xl sm:leading-none">Latest Articles</h2>
</div>
    <div class="grid gap-8 lg:grid-cols-3 sm:max-w-sm sm:mx-auto lg:max-w-full">
                            <div class="overflow-hidden transition-shadow duration-300 bg-white rounded shadow-sm border">
                            <img title="Bitcoin" alt="Bitcoin - Cryptocurrency not just for geeks" src="https://clivewalkden.sirv.com/assets/images/blog/categories/bitcoin.jpg?profile=personal" class="object-cover w-full h-64" height="335" width="595"/>
                        <div class="p-5">
                <p class="mb-3 text-xs font-semibold tracking-wide uppercase">
                    <a href="/blog/bitcoin/" class="transition-colors duration-200 text-title hover:text-yellow-700" aria-label="Category" title="Bitcoin">
                        Bitcoin
                    </a>
                    <span class="text-gray-600">— <time datetime="2022-01-30T20:45:00+00:00">30 January 2022</time></span>
                </p>
                <a href="/blog/bitcoin/rollercoin-intro/" aria-label="Article" title="RollerCoin Introduction to virtual Bitcoin mining" class="inline-block mb-3 font-sans text-xl font-bold tracking-tight sm:text-2xl sm:leading-none text-title transition-colors duration-200 hover:text-yellow-400">
                    RollerCoin Intro
                </a>
                <p class="mb-5 text-gray-700">
                    An introduction to the RollerCoin site and how you can use it to mine your own coins
                </p>
                <div class="flex items-center">
    <a href="/about/" aria-label="Author" title="Author" class="mr-3">
        <img title="" alt="avatar" src="https://clivewalkden.sirv.com/assets/images/clive-walkden.jpg?profile=personal&amp;w=40&amp;h=40" class="object-cover w-10 h-10 rounded-full shadow-sm" width="40" height="40"/>
    </a>
    <div>
        <a href="/about/" aria-label="Author" title="Author" class="font-semibold text-gray-800 transition-colors duration-200 hover:text-yellow-400">Clive Walkden</a>
        <p class="text-sm font-medium leading-4 text-gray-600">Author</p>
    </div>
</div>            </div>
        </div>
                            <div class="overflow-hidden transition-shadow duration-300 bg-white rounded shadow-sm border">
                            <img title="Magento 2" alt="Magento 2 Blog Posts" src="https://clivewalkden.sirv.com/assets/images/blog/categories/magento-2.jpg?profile=personal" class="object-cover w-full h-64" height="335" width="595"/>
                        <div class="p-5">
                <p class="mb-3 text-xs font-semibold tracking-wide uppercase">
                    <a href="/blog/magento-2/" class="transition-colors duration-200 text-title hover:text-yellow-700" aria-label="Category" title="Magento 2">
                        Magento 2
                    </a>
                    <span class="text-gray-600">— <time datetime="2022-01-22T15:30:00+00:00">22 January 2022</time></span>
                </p>
                <a href="/blog/magento-2/magento2-logging/" aria-label="Article" title="Magento 2.4.x Logging" class="inline-block mb-3 font-sans text-xl font-bold tracking-tight sm:text-2xl sm:leading-none text-title transition-colors duration-200 hover:text-yellow-400">
                    Magento 2.4.x Writing to a Log File
                </a>
                <p class="mb-5 text-gray-700">
                    How to log to information to a file in different Magento 2.4.x versions
                </p>
                <div class="flex items-center">
    <a href="/about/" aria-label="Author" title="Author" class="mr-3">
        <img title="" alt="avatar" src="https://clivewalkden.sirv.com/assets/images/clive-walkden.jpg?profile=personal&amp;w=40&amp;h=40" class="object-cover w-10 h-10 rounded-full shadow-sm" width="40" height="40"/>
    </a>
    <div>
        <a href="/about/" aria-label="Author" title="Author" class="font-semibold text-gray-800 transition-colors duration-200 hover:text-yellow-400">Clive Walkden</a>
        <p class="text-sm font-medium leading-4 text-gray-600">Author</p>
    </div>
</div>            </div>
        </div>
                            <div class="overflow-hidden transition-shadow duration-300 bg-white rounded shadow-sm border">
                            <img title="Linux" alt="Linux command line tools, installations etc" src="https://clivewalkden.sirv.com/assets/images/blog/categories/linux.jpg?profile=personal" class="object-cover w-full h-64" height="335" width="595"/>
                        <div class="p-5">
                <p class="mb-3 text-xs font-semibold tracking-wide uppercase">
                    <a href="/blog/linux/" class="transition-colors duration-200 text-title hover:text-yellow-700" aria-label="Category" title="Linux">
                        Linux
                    </a>
                    <span class="text-gray-600">— <time datetime="2022-01-15T10:30:00+00:00">15 January 2022</time></span>
                </p>
                <a href="/blog/linux/letsencrypt-delete-certificate/" aria-label="Article" title="Letsencrypt Certbot correctly delete certificate" class="inline-block mb-3 font-sans text-xl font-bold tracking-tight sm:text-2xl sm:leading-none text-title transition-colors duration-200 hover:text-yellow-400">
                    Letsencrypt Certbot correctly delete certificate
                </a>
                <p class="mb-5 text-gray-700">
                    A quick example of how to delete a LetsEncrypt Certbot generated certificate.
                </p>
                <div class="flex items-center">
    <a href="/about/" aria-label="Author" title="Author" class="mr-3">
        <img title="" alt="avatar" src="https://clivewalkden.sirv.com/assets/images/clive-walkden.jpg?profile=personal&amp;w=40&amp;h=40" class="object-cover w-10 h-10 rounded-full shadow-sm" width="40" height="40"/>
    </a>
    <div>
        <a href="/about/" aria-label="Author" title="Author" class="font-semibold text-gray-800 transition-colors duration-200 hover:text-yellow-400">Clive Walkden</a>
        <p class="text-sm font-medium leading-4 text-gray-600">Author</p>
    </div>
</div>            </div>
        </div>
            </div>
</div>    </div>
    </div>
    <div class="mx-auto max-w-7xl  relative mx-auto my-5 h-16">
    <a href="#" class="block absolute left-1/2 w-16 h-16 -ml-8 bg-up bg-no-repeat bg-center opacity-60 hover:opacity-100"></a>
</div>    <footer class="py-6 text-white footer">
    <div class="container px-6 mx-auto space-y-6 divide-y divide-gray-400 md:space-y-12 divide-opacity-50">
        <div class="grid justify-center lg:justify-between">
            <div class="flex flex-col self-center text-sm text-center md:block lg:col-start-1 md:space-x-6">
                <span>Copyright ©2013-2022 Clive Walkden</span>
                <a href="/sitemap.xml">
                    <span>Sitemap</span>
                </a>
            </div>
            <div class="flex justify-center pt-4 space-x-4 lg:pt-0 lg:col-end-13">
                                    <a href="mailto:contact@clivewalkden.co.uk" title="Email" target="_blank" rel="external me"
   class="flex items-center justify-center w-10 h-10 rounded-full bg-primary text-title transition duration-200 hover:bg-yellow-700">
    <i class="bx bx-sm bx-envelope bx-tada-hover"></i>
</a>                                    <a href="https://twitter.com/clivewalkden" title="Twitter" target="_blank" rel="external me"
   class="flex items-center justify-center w-10 h-10 rounded-full bg-primary text-title transition duration-200 hover:bg-yellow-700">
    <i class="bx bx-sm bxl-twitter "></i>
</a>                                    <a href="https://github.com/clivewalkden" title="Github" target="_blank" rel="external me"
   class="flex items-center justify-center w-10 h-10 rounded-full bg-primary text-title transition duration-200 hover:bg-yellow-700">
    <i class="bx bx-sm bxl-github "></i>
</a>                            </div>
        </div>
    </div>
</footer>    </body>
</html>
