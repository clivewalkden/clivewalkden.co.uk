<!DOCTYPE html>
<html lang="en">
    <head>
                <link rel="preconnect" href="https://scripts.sirv.com" crossorigin>
<link rel="preconnect" href="https://clivewalkden.sirv.com" crossorigin>
<link rel="dns-prefetch" href="https://scripts.sirv.com">
<link rel="dns-prefetch" href="https://clivewalkden.sirv.com">
<script src="https://scripts.sirv.com/sirv.nospin.js"></script>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
                <link rel="canonical" href="https://clivewalkden.co.uk/blog/magento-2/magento-2-admin-password-history-reset/">
                <meta name="description" content="Do you want to clear the password history on your staging test site (not recommended for live)?">
        <link rel="icon" href="/favicon.ico">
        <link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
        <title>Magento 2 admin password history reset</title>
        <link rel="stylesheet" href="/assets/build/css/main.css">
        <script defer src="/assets/build/js/main.js"></script>
        <link href="//fonts.googleapis.com/css?family=Cabin" rel="stylesheet" type="text/css">
    </head>
    <body class="text-gray-900 font-default antialiased leading-normal tracking-normal">
        
    <header class="bg-gray-800 p-8 mt-0 fixed w-full z-10 top-0">
    <div class="container mx-auto flex flex-wrap items-center">
        <div class="flex w-1/2 justify-center md:justify-start text-white">
            <a href="/" class="text-white no-underline hover:text-white hover:no-underline">
                <h1 class="text-3xl pl-2" style="text-shadow: 1px 1px 0 #ffae00">Clive Walkden</h1>
                <span class="font-serif italic items-center text-gray-200 pl-2 text-xs lg:text-base hidden md:block">SysOps, Magento 2, PHP and my general mind dumps.</span>
            </a>
        </div>

        <div class="w-full lg:hidden flex justify-end flex-1 md:float-right">
            <button id="nav-toggle"
                    class="flex items-center px-3 py-2 border rounded text-gray-500 border-gray-600 hover:text-white hover:border-white">
                <svg class="fill-current h-3 w-3" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><title>
                        Menu</title>
                    <path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"/>
                </svg>
            </button>
        </div>

        <nav class="w-full flex-grow lg:flex lg:items-center lg:w-auto hidden lg:block pt-6 lg:pt-0 justify-end" id="nav-content">
    <ul class="list-reset flex justify-between flex-1 md:flex-none items-center">
        <li class="mr-3">
            <a href="/" class="inline-block text-gray-400 no-underline hover:text-gray-200 hover:text-underline py-2 px-4">Home</a>
        </li>
        <li class="mr-3">
            <a href="/portfolio/" class="inline-block text-gray-400 no-underline hover:text-gray-200 hover:text-underline py-2 px-4">Portfolio</a>
        </li>
        <li class="fmr-3">
            <a href="/blog/" class="inline-block py-2 px-4 text-white no-underline">Blog</a>
        </li>
        <li class="mr-3">
            <a href="/about/" class="inline-block text-gray-400 no-underline hover:text-gray-200 hover:text-underline py-2 px-4">About</a>
        </li>
    </ul>
</nav>    </div>
</header>
    <div role="main" class="container shadow-lg mx-auto bg-white mt-24 md:mt-28">
                <div class="px-4 py-16 mx-auto sm:max-w-xl md:max-w-full lg:max-w-screen-xl md:px-24 lg:px-8 lg:py-20">
        <!--Title-->
        <div class="text-center">
            <p class="text-sm md:text-base text-yellow-500 font-bold">
                                <time datetime="2017-08-08T00:00:00+00:00">8 August 2017</time>
                <span class="text-gray-900">/</span> <a href="/blog/magento-2/">Magento 2</a>
            </p>
            <div class="flex">
                                    <a href="/blog/linux/showing-all-users-cron-jobs/" title="Output All Users Cron Jobs"
                       class="flex-none text-sm self-center">Previous Article</a>
                                <h1 class="font-sans text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl sm:leading-none flex-grow text-center">Magento 2 admin password history reset</h1>
                                    <a href="/blog/linux/how-to-see-files-modified-on-a-certain-date/" title="How to see files changed on a certain date"
                       class="flex-none text-sm self-center">Next Article</a>
                            </div>
        </div>

        <!--image-->
                    <div class="container w-full max-w-6xl mx-auto bg-white bg-cover mt-12 rounded bg-center"
                 style="background-image:url('/assets/images/blog/articles/magento-2-admin-password-history-reset.png'); height: 75vh;"></div>
        
    <!--Container-->
        <div class="container max-w-5xl mx-auto -mt-32">

            <div class="mx-0 sm:mx-6">

                <div class="bg-white w-full p-8 md:p-24 text-lg text-gray-700 content">
                    <!--Post Content-->
                    <p>Magento 2 (by default) forces admin users to reset their passwords every 90 days. This is great for security and I&#39;m extremely happy that I don&#39;t have to remind clients to update their password every x number of days.</p>

<p>The only issue I have is that the staging environment admin is worked on by many different people in the office and we like a consistent password for this development process. Rather than turning the system off and the settings being pushed to the live site accidentally we can access the database and reset the password history for a user.</p>

<p>When you access your database you should see something similar to the below image.</p>

<p><img alt="Magento 2 Admin Password history table" src="/assets/images/blog/articles/admin_passwords.png" style="width: 650px; height: 307px;" title="Magento 2 admin_passwords Table" /></p>

<p>This table records the user, password hash, the date the password expires and the time it was last updated. If you try to change your password in the Magento 2 Admin area it will check this table against the new password and reject the change if it matches your new hash against any hash recorded against your user.</p>

<p>In my example I'm going to update the user_id 1. Simply delete all <strong>but the last record</strong> for that user. In this case it would be records 3, 4, 8, 9. Now when I change my password I can use something that has been used before without Magento 2 returning an error.</p>

<blockquote>
  <p><strong>Important</strong></p>
  
  <p><strong>Please do not do this on a live environment as it is there to protect your admin accounts security.</strong></p>
</blockquote>
                    <!--/ Post Content-->
                </div>

                <!--Author-->
                <div class="flex w-full items-center font-sans p-8 md:p-24">
                    <img class="w-10 h-10 rounded-full mr-4" src="/assets/images/clive-walkden.jpg"
                         alt="Avatar of Clive Walkden">
                    <div class="flex-1">
                        <p class="text-base font-bold text-base md:text-xl leading-none">Clive Walkden</p>
                    </div>
                </div>
                <!--/Author-->
            </div>
        </div>
        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "BlogPosting",
            "headline": "Magento 2 admin password history reset",
            "description": "Do you want to clear the password history on your staging test site (not recommended for live)?",
            "datePublished": "August 8, 2017",
            "mainEntityOfPage": "True",
            "image": {
                "@type": "imageObject",
                "url": "https://www.clivewalkden.co.uk/assets/images/blog/articles/magento-2-admin-password-history-reset.png",
                "height": "600",
                "width": "800"
            },
            "publisher": {
                "@type": "Organization",
                "name": "Clive Walkden",
                "logo": {
                    "@type": "imageObject",
                    "url": "https://www.clivewalkden.co.uk/assets/images/blog/categories/general.jpg"
                }
            },
            "author": {
                "@type": "Person",
                "name": "Clive Walkden",
                "url": "https://clivewalkden.co.uk/about/"
            },
            "articleBody": "Magento 2 (by default) forces admin users to reset their passwords every 90 days. This is great for security and I&amp;#39;m extremely happy that I don&amp;#39;t have to remind clients to update their password every x number of days.

The only issue I have is that the staging environment admin is worked on by many different people in the office and we like a consistent password for this development process. Rather than turning the system off and the settings being pushed to the live site accidentally we can access the database and reset the password history for a user.

When you access your database you should see something similar to the below image.



This table records the user, password hash, the date the password expires and the time it was last updated. If you try to change your password in the Magento 2 Admin area it will check this table against the new password and reject the change if it matches your new hash against any hash recorded against your user.

In my example I&#039;m going to update the user_id 1. Simply delete all but the last record for that user. In this case it would be records 3, 4, 8, 9. Now when I change my password I can use something that has been used before without Magento 2 returning an error.


  Important
  
  Please do not do this on a live environment as it is there to protect your admin accounts security.

"
        }
        </script>

        
        <div class="px-4 py-16 mx-auto sm:max-w-xl md:max-w-full lg:max-w-screen-xl md:px-24 lg:px-8 lg:py-20">

    <div class="max-w-xl mb-2 md:mx-auto sm:text-center lg:max-w-2xl md:mb-12 border-b border-primary">
    <h2 class="mb-4 font-sans text-3xl font-bold tracking-tight text-title sm:text-4xl sm:leading-none">Latest Articles</h2>
</div>
    <div class="grid gap-8 lg:grid-cols-3 sm:max-w-sm sm:mx-auto lg:max-w-full">
                            <div class="overflow-hidden transition-shadow duration-300 bg-white rounded shadow-sm border">
                            <img title="Bitcoin" alt="Bitcoin - Cryptocurrency not just for geeks" src="https://clivewalkden.sirv.com/assets/images/blog/categories/bitcoin.jpg?profile=personal" class="object-cover w-full h-64" height="335" width="595"/>
                        <div class="p-5">
                <p class="mb-3 text-xs font-semibold tracking-wide uppercase">
                    <a href="/blog/bitcoin/" class="transition-colors duration-200 text-title hover:text-yellow-700" aria-label="Category" title="Bitcoin">
                        Bitcoin
                    </a>
                    <span class="text-gray-600">— <time datetime="2022-01-30T20:45:00+00:00">30 January 2022</time></span>
                </p>
                <a href="/blog/bitcoin/rollercoin-intro/" aria-label="Article" title="RollerCoin Introduction to virtual Bitcoin mining" class="inline-block mb-3 font-sans text-xl font-bold tracking-tight sm:text-2xl sm:leading-none text-title transition-colors duration-200 hover:text-yellow-400">
                    RollerCoin Intro
                </a>
                <p class="mb-5 text-gray-700">
                    An introduction to the RollerCoin site and how you can use it to mine your own coins
                </p>
                <div class="flex items-center">
    <a href="/about/" aria-label="Author" title="Author" class="mr-3">
        <img title="" alt="avatar" src="https://clivewalkden.sirv.com/assets/images/clive-walkden.jpg?profile=personal&amp;w=40&amp;h=40" class="object-cover w-10 h-10 rounded-full shadow-sm" width="40" height="40"/>
    </a>
    <div>
        <a href="/about/" aria-label="Author" title="Author" class="font-semibold text-gray-800 transition-colors duration-200 hover:text-yellow-400">Clive Walkden</a>
        <p class="text-sm font-medium leading-4 text-gray-600">Author</p>
    </div>
</div>            </div>
        </div>
                            <div class="overflow-hidden transition-shadow duration-300 bg-white rounded shadow-sm border">
                            <img title="Magento 2" alt="Magento 2 Blog Posts" src="https://clivewalkden.sirv.com/assets/images/blog/categories/magento-2.jpg?profile=personal" class="object-cover w-full h-64" height="335" width="595"/>
                        <div class="p-5">
                <p class="mb-3 text-xs font-semibold tracking-wide uppercase">
                    <a href="/blog/magento-2/" class="transition-colors duration-200 text-title hover:text-yellow-700" aria-label="Category" title="Magento 2">
                        Magento 2
                    </a>
                    <span class="text-gray-600">— <time datetime="2022-01-22T15:30:00+00:00">22 January 2022</time></span>
                </p>
                <a href="/blog/magento-2/magento2-logging/" aria-label="Article" title="Magento 2.4.x Logging" class="inline-block mb-3 font-sans text-xl font-bold tracking-tight sm:text-2xl sm:leading-none text-title transition-colors duration-200 hover:text-yellow-400">
                    Magento 2.4.x Writing to a Log File
                </a>
                <p class="mb-5 text-gray-700">
                    How to log to information to a file in different Magento 2.4.x versions
                </p>
                <div class="flex items-center">
    <a href="/about/" aria-label="Author" title="Author" class="mr-3">
        <img title="" alt="avatar" src="https://clivewalkden.sirv.com/assets/images/clive-walkden.jpg?profile=personal&amp;w=40&amp;h=40" class="object-cover w-10 h-10 rounded-full shadow-sm" width="40" height="40"/>
    </a>
    <div>
        <a href="/about/" aria-label="Author" title="Author" class="font-semibold text-gray-800 transition-colors duration-200 hover:text-yellow-400">Clive Walkden</a>
        <p class="text-sm font-medium leading-4 text-gray-600">Author</p>
    </div>
</div>            </div>
        </div>
                            <div class="overflow-hidden transition-shadow duration-300 bg-white rounded shadow-sm border">
                            <img title="Linux" alt="Linux command line tools, installations etc" src="https://clivewalkden.sirv.com/assets/images/blog/categories/linux.jpg?profile=personal" class="object-cover w-full h-64" height="335" width="595"/>
                        <div class="p-5">
                <p class="mb-3 text-xs font-semibold tracking-wide uppercase">
                    <a href="/blog/linux/" class="transition-colors duration-200 text-title hover:text-yellow-700" aria-label="Category" title="Linux">
                        Linux
                    </a>
                    <span class="text-gray-600">— <time datetime="2022-01-15T10:30:00+00:00">15 January 2022</time></span>
                </p>
                <a href="/blog/linux/letsencrypt-delete-certificate/" aria-label="Article" title="Letsencrypt Certbot correctly delete certificate" class="inline-block mb-3 font-sans text-xl font-bold tracking-tight sm:text-2xl sm:leading-none text-title transition-colors duration-200 hover:text-yellow-400">
                    Letsencrypt Certbot correctly delete certificate
                </a>
                <p class="mb-5 text-gray-700">
                    A quick example of how to delete a LetsEncrypt Certbot generated certificate.
                </p>
                <div class="flex items-center">
    <a href="/about/" aria-label="Author" title="Author" class="mr-3">
        <img title="" alt="avatar" src="https://clivewalkden.sirv.com/assets/images/clive-walkden.jpg?profile=personal&amp;w=40&amp;h=40" class="object-cover w-10 h-10 rounded-full shadow-sm" width="40" height="40"/>
    </a>
    <div>
        <a href="/about/" aria-label="Author" title="Author" class="font-semibold text-gray-800 transition-colors duration-200 hover:text-yellow-400">Clive Walkden</a>
        <p class="text-sm font-medium leading-4 text-gray-600">Author</p>
    </div>
</div>            </div>
        </div>
            </div>
</div>    </div>
    </div>
    <div class="mx-auto max-w-7xl  relative mx-auto my-5 h-16">
    <a href="#" class="block absolute left-1/2 w-16 h-16 -ml-8 bg-up bg-no-repeat bg-center opacity-60 hover:opacity-100"></a>
</div>    <footer class="py-6 text-white footer">
    <div class="container px-6 mx-auto space-y-6 divide-y divide-gray-400 md:space-y-12 divide-opacity-50">
        <div class="grid justify-center lg:justify-between">
            <div class="flex flex-col self-center text-sm text-center md:block lg:col-start-1 md:space-x-6">
                <span>Copyright ©2013-2022 Clive Walkden</span>
                <a href="/sitemap.xml">
                    <span>Sitemap</span>
                </a>
            </div>
            <div class="flex justify-center pt-4 space-x-4 lg:pt-0 lg:col-end-13">
                                    <a href="mailto:contact@clivewalkden.co.uk" title="Email" target="_blank" rel="external me"
   class="flex items-center justify-center w-10 h-10 rounded-full bg-primary text-title transition duration-200 hover:bg-yellow-700">
    <i class="bx bx-sm bx-envelope bx-tada-hover"></i>
</a>                                    <a href="https://twitter.com/clivewalkden" title="Twitter" target="_blank" rel="external me"
   class="flex items-center justify-center w-10 h-10 rounded-full bg-primary text-title transition duration-200 hover:bg-yellow-700">
    <i class="bx bx-sm bxl-twitter "></i>
</a>                                    <a href="https://github.com/clivewalkden" title="Github" target="_blank" rel="external me"
   class="flex items-center justify-center w-10 h-10 rounded-full bg-primary text-title transition duration-200 hover:bg-yellow-700">
    <i class="bx bx-sm bxl-github "></i>
</a>                            </div>
        </div>
    </div>
</footer>    </body>
</html>
